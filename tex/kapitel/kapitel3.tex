\chapter{Anforderungsanalyse}
\label{Kap3}
Die Anforderungen die in diesem Kapitel herausgearbeitet werden, bilden die Grundlage für die Entscheidungen in den nächsten Kapiteln. Zuerst werden grundlegende Bedingungen und die Vorgehensweise erklärt. Anschließend werden einige Szenarien zur Benutzung der Offline-Funktion beschrieben. Diese sollen beim Verstehen der Anforderungen, die im darauf folgenden Kapitel aufgelistet werden, helfen.

\section{Vorgehensweise und Randbedingungen}
Da bei CROSSLOAD fast nur ehrenamtliche Mitarbeiter tätig sind, gibt es niemanden der genaue Anforderungen an Features vorschreibt. Vielmehr werden die Anforderungen gemeinsam im Team erarbeitet und diskutiert. In einem ersten Brainstorming wurden die gewünschten Funktionalitäten anhand einiger Beispielszenarien diskutiert und dokumentiert. In den Kapiteln~\ref{Kap3:Szenarien} und \ref{Kap3:Anforderungen} werden diese näher ausgearbeitet und beschrieben.

Es gibt zwei Randbedingungen, die für die Weiterentwicklung der \ac{PWA} relevant sind:

Erstens muss das Framework Angular benutzt werden, weil das bisherige Webportal auch in Angular geschrieben ist. Eine andere Technologie zu verwenden, würde die Integration in die bestehende Plattform deutlich erschweren. 

Als zweites stellt sich die Frage, welche Browser unterstützt werden müssen. CROSSLOAD befindet sich in der Beta-Phase und hat noch keine große Nutzerbasis. Für die ersten zwanzig Tage im Juni wurden 800 Besucher gezählt. Die Verteilung der Browser dieser 800 Nutzer ist in \autoref{internetnutzung/crossload-mobil.png} und \autoref{internetnutzung/crossload-desktop.png} zu sehen. Auf Mobilgeräten dominieren eindeutig Safari und Chrome mit einem Anteil von über 90\%. Auf Desktopgeräten teilt sich die Nutzung fast gleichmäßig zwischen Safari, Firefox und Chrome auf. Chrome hat etwas mehr Anteil und Firefox etwas weniger. Der Browser Edge wird noch sehr selten genutzt.

\bild{internetnutzung/crossload-mobil.png}{10cm}{Nutzung von CROSSLOAD nach Webbrowser auf Mobilgeräten}

\bild{internetnutzung/crossload-desktop.png}{10cm}{Nutzung von CROSSLOAD nach Webbrowser auf dem Desktop}

Da diese Daten noch nicht sehr aussagekräftig sind, weil eine zu geringe Nutzerbasis vorhanden ist, wird die durchschnittliche Browsernutzung in Deutschland betrachtet. Dabei kann zwischen der Nutzung der Browser auf PCs, wie in \autoref{internetnutzung/browser-pc-deutschland} zu sehen ist, und auf Mobilgeräten, wie in \autoref{internetnutzung/browser-mobil-deutschland} zu sehen, unterschieden werden. 

\bild{internetnutzung/browser-mobil-deutschland}{13cm}{Internetnutzung nach mobilen Browsern in Deutschland \autocite{mobile-browser-deutschland}}

Der führende Browser auf Mobilgeräten ist Chrome mit über 50\% Marktanteil. Gefolgt von Safari und Samsung Internet. Andere Browser spielen eine sehr untergeordnete Rolle. Im Vergleich zu den von CROSSLOAD erhobenen Daten, wird Samsung Internet dieser Statistik zufolge öfter genutzt, Safari dagegen weniger oft.

\bild{internetnutzung/browser-pc-deutschland}{13cm}{Internetnutzung auf PCs nach Browsern in Deutschland \autocite{browser-deutschland}}

Der am häufigst genutzte Browser auf dem PC in Deutschland ist Chrome mit über 40\%. Firefox steht an Platz zwei. Safari erreicht noch einen Wert von 10\%. Zu beobachten ist auch der Abwärtstrend des Internet Explorers, der in den letzten Jahre viele Marktanteile verlor. In den Daten von CROSSLOAD hat Safari mehr Anteile und Chrome etwas weniger.

Auch wenn die Offline-Funktionen des Webportals für dessen Nutzung nicht essenziell sind, sollten diese doch möglichst vielen Nutzern zur Verfügung stehen. Dies bedingt die Unterstützung der am weitesten verbreiteten Web Browser Google Chrome, Firefox, Safari und Samsung Internet auf Android und iOS. Dabei wird nur die aktuelle Version des jeweiligen Browsers unterstützt, weil alle gängigen Browser über eine automatische Updatefunktion verfügen. Dadurch erhalten die meisten Nutzer sehr zeitnah die neuste Version.

Samsung Internet basiert intern auf Chromium und teilt somit die allermeisten Funktionen mit Chrome \autocite{samsung-webkit}. Für den Edge-Browser wurde bereits 2018 angekündigt, Chromium als Basis zu verwenden \autocite{edge-faq}. In späteren Entscheidungen wird deswegen Samsung-Internet und Edge nur erwähnt, wenn es von der Funktionalität im Chrome Browser abweicht.

In \autoref{Kap3:Browser} ist zusammengefasst, welche Browser unter welchen Plattformen unterstützt werden sollen.

\begin{table}
  \renewcommand{\arraystretch}{1.2}
  \centering
  \sffamily
  \begin{footnotesize}
    \begin{tabular}{l l}
      \toprule
      \textbf{Plattform} & \textbf{unterstützte Browser} \\
      \midrule
      \emph{Android} & Chrome, Samsung Internet \\
      \emph{iOS} & Safari, Chrome \\
      \emph{Windows, Mac, Linux} & Chrome, Firefox, Edge, Safari \\
      \bottomrule
    \end{tabular}
  \end{footnotesize}
  \rmfamily
  \caption{Unterstützte Browser und Plattformen}
  \label{Kap3:Browser}
\end{table}

\section{Szenarien}
\label{Kap3:Szenarien}
Jedes Szenario beschreibt eine konkrete Interaktion mit dem Webportal, ohne dabei Sonderfälle abzubilden. Sie dienen dazu, die Anforderungen besser zu verstehen. Im Folgenden werden drei Szenarien beschrieben.

\subsection{Predigt im Auto anhören}
Akteur: Benutzer

Ablauf:
\begin{enumerate}
	\item Benutzer ist zu Hause und durchsucht Inhalte auf CROSSLOAD
	\item Benutzer favorisiert sich mehrere Inhalte
	\item Der Download der Inhalte startet
	\item Sobald der Download fertig ist, wird das dem Benutzer angezeigt
	\item Benutzer geht außer Haus in sein Auto und möchte dort eine favorisierte Predigt hören
	\item Benutzer bekommt alle favorisierten Inhalte angezeigt
	\item Benutzer wählt einen favorisierten Inhalt aus und sieht die Übersichtsseite des Inhalts
	\item Benutzer hört sich die Predigt an und benötigt dafür kein Internet
\end{enumerate}

\subsection{Inhalt für die Reise vormerken}
Akteur: Benutzer

Ablauf:
\begin{enumerate}
	\item Benutzer ist am Flughafen und steht kurz vor einem Flug
	\item Benutzer favorisiert sich einen Inhalt auf CROSSLOAD
	\item CROSSLOAD fragt den Benutzer, ob er den Inhalt auch über mobiles Internet herunterladen möchte
	\item Der Benutzer bestätigt diese Anfrage
	\item Der Download beginnt
	\item Sobald der Download fertig ist, wird das dem Benutzer angezeigt
	\item Benutzer ist im Flugzeug und hört sich die favorisierte Predigt an
\end{enumerate}

\subsection{Inhalt herunterladen, sobald eine WLAN Verbindung besteht}
Akteur: Benutzer

Ablauf:
\begin{enumerate}
	\item Benutzer ist unterwegs und bekommt einen Inhalt auf CROSSLOAD empfohlen
	\item Benutzer favorisiert diesen Inhalt
	\item CROSSLOAD fragt den Benutzer, ob er den Inhalt auch über mobiles Internet herunterladen möchte
	\item Der Benutzer verneint diese Anfrage
	\item Der Benutzer kommt nach Hause und ist mit dem eigenen WLAN verbunden
	\item Der Download der favorisierten Predigt beginnt
	\item Sobald der Download fertig ist, wird das dem Benutzer angezeigt
	\item Der Benutzer hört sich die favorisierte Predigt an. Obwohl er eine WLAN-Verbindung besitzt, werden die heruntergeladenen Inhalte zum Abspielen der Predigt genutzt
\end{enumerate}

\section{Anforderungen}
\label{Kap3:Anforderungen}
Aus den Diskussionen mit Mitarbeitern von CROSSLOAD haben sich einige Anforderungen herausgestellt, die in diesem Kapitel aufgelistet sind. Für diese Thesis sind nur Audioinhalte auf CROSSLOAD relevant. 

\subsection{Funktionale Anforderungen}

\begin{enumerate}
	\item Der Benutzer kann sich einen Inhalt vormerken, auch favorisieren genannt.  
	\item Der vorgemerkte Inhalt wird automatisch anhand der Verbindungsart heruntergeladen. Der genaue Ablauf ist in einem Aktivitätsdiagramm in \autoref{diagramme/anforderung-konnektivitaet} zu sehen.
	
	\begin{itemize}
		\item Wenn eine WLAN-Verbindung besteht, wird der Download sofort gestartet
		\item Wenn eine mobile Datenverbindung besteht, wird der Benutzer gefragt, ob er den Inhalt jetzt herunterladen möchte
		\item Wenn der Benutzer dies verneint, wird auf eine WLAN-Verbindung gewartet und der Download gestartet, sobald diese besteht
	\end{itemize}
	
\bild{diagramme/anforderung-konnektivitaet}{15cm}{Aktivitätsdiagramm: Download des Inhalt abhängig von der Verbindungsart}

	\item Der Benutzer wird über den Fortschritt des Downloads informiert. Folgende Status sind möglich: gestartet, wird heruntergeladen, heruntergeladen, Fehler
	\item Das Portal erkennt, wenn die Internetverbindung unterbrochen wird und zeigt dem Benutzer einen Hinweis an
	\item Die zurzeit heruntergeladenen Inhalte können in einer Übersicht gesehen werden
	\item Die Inhalte sollen gefiltert oder sortiert werden könnten. Zum Beispiel nach Download-Datum
 	\item Die zurzeit heruntergeladenen Inhalte können gelöscht werden. Einzeln oder alle auf einmal
	\item Es soll möglich sein, für einen bestimmten Inhalt herauszufinden, ob dieser offline verfügbar ist
	\item Die Inhalte der Detailseite eines heruntergeladenen Inhalts werden gespeichert. Dazu gehören zum Beispiel: Id, Titel, Autor oder Vorschaubild
	\item Der heruntergeladene Inhalt kann angehört werden
	\begin{itemize}
		\item Wenn ein Inhalt angehört werden soll, der bereits heruntergeladen ist, sollen die heruntergeladenen Daten verwendet werden, um Netzwerkverkehr zu vermeiden
	\end{itemize}
	
\end{enumerate}

\subsection{Nichtfunktionale Anforderungen}
Um in den nächsten Kapitel die Anforderungen besser referenzieren zu können, wird die Nummerierung der funktionalen Anforderungen hier fortgesetzt.

\begin{enumerate}
	\setcounter{enumi}{10}
    \item Die Länge der Audioinhalte liegt zwischen wenigen Minuten bis zu 120 Minuten. Eine Audiodatei ist bis zu 100 \ac{MB} groß
    \item Die Metadaten zu einem Inhalt können bis zu 50 \ac{kB} groß sein
    \item Es sollen möglichst viele Inhalte favorisiert werden können
    \item Ein Download findet im Hintergrund statt, ohne die Bedienung des Portals einzuschränken, wie zum Beispiel durch Einfrieren der Oberfläche
\end{enumerate}

\subsection{Use Cases}
\autoref{diagramme/use-cases} zeigt alle Use Cases in einem Diagramm. Netzwerk-Service steht für eine \ac{API} zum Herunterladen eines Inhalts. Welche \ac{API} das sein wird, wird in den nächsten Kapiteln erarbeitet. Auch welche \ac{API} zur Datenverwaltung benutzt wird, steht noch nicht fest. Inhalte können vorgemerkt und dadurch heruntergeladen werden. Außerdem gespeichert, abgerufen, durchsucht, gelöscht und angehört werden.

\bild{diagramme/use-cases}{14cm}{Use Case Diagramm der Offline-Funktionalitäten von CROSSLOAD}
