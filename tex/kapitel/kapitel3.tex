\chapter{Anforderungsanalyse}
\label{Kap3}
Die Anforderungen die in diesem Kapitel herausgearbeitet werden, bilden die Grundlage für die Entscheidungen in den nächsten Kapiteln. Zuerst werden grundlegende Bedingungen und die Vorgehensweise erklärt. Anschließend werden einige Szenarien zur Benutzung der Offline Funktion beschrieben und daraus konkrete Anforderungen hergeleitet.

\section{Vorgehensweise und Randbedingungen}
Da CROSSLOAD fast nur ehrenamtliche Mitarbeiter hat, gibt es niemanden der genaue Anforderungen an Features vorschreibt. Vielmehr werden die Anforderungen zusammen im Team diskutiert. Auch für die Offline Funktionalitäten gab es ein Brainstorming mit Mitarbeitern von CROSSLOAD. Daraus haben sich einige Anforderungen herausgestellt. Zusätzlich werden sich einige Szenarien überlegt, die verschiedene Nutzungen der Offline Funktionialität beleuchtet. Die Szenarien helfen beim Verstehen der Anforderungen.

Es gibt zwei Randbedingungen, die für diese Thesis relevant sind. Erstens muss das Framework Angular benutzt werden, weil das bisherige Webportal auch in Angular geschrieben ist. Eine andere Technologie zu verwenden, würde die Integration in die bestehende Platform sehr schwer gestalten. Als zweites stellt sich die Frage welche Browser unterstützt werden müssen. CROSSLOAD befindet sich in der Beta-Phase, deswegen gibt es noch nicht genügend Daten darüber, welche Browser von den Nutzern von CROSSLOAD verwendet werden. Als Anhaltspunkt dient deswegen die durchschnittliche Browsernutzung in Deutschland. Dabei kann zwischen der Nutzung der Browser auf PCs wie in \autoref{internetnutzung/browser-pc-deutschland} zu sehen und auf Mobilgeräten wie in \autoref{internetnutzung/browser-mobil-deutschland} zu sehen unterschieden werden.

\bild{internetnutzung/browser-pc-deutschland}{10cm}{Internetnutzung nach Browsern in Deutschland \autocite{browser-deutschland}}

\bild{internetnutzung/browser-mobil-deutschland}{10cm}{Internetnutzung nach mobilen Browsern in Deutschland \autocite{mobile-browser-deutschland}}

Die Offline-Funktionen für CROSSLOAD, die in dieser Thesis erarbeitet werden, sind nicht essentiel zum Benutzen des Portals. Deswegen kann auch in kauf genommen werden, dass manche Funktionen für Nutzer mit gewissen Browsern nicht zur Verfügung stehen. Natürlich ist es besser, wenn viele Nutzer von den neuen Funktionalitäten profitieren. Wichtig ist nur, dass iOS und Android unterstützt werden. Dabei wird nicht berücksichtigt, welche Browserversion die Nutzer verwenden. Alle gängingen Browser verfügen über eine automatische Updatefunktion, dadurch erhalten die meisten Nutzer sehr zeitnah veröffentlichte Updates.

Bei den Browsern für Mobilgeräte ist der Markanteil von Chrome, Safari und Samsung Internet zusammengerechnet über 96\%. Außerdem basiert Samsung Internet intern auf Chromium und teilt somit die allermeisten Funktionen mit Chrome \autocite{samsung-webkit}. In späteren Entscheidungen wird deswegen Samsung-Internet nur erwähnt wenn es von der Funktionalität im Chrome Browser abweicht.

Für PCs gibt es mehr Browserfamilien, die relevant sein könnten. Insgesamt lassen sich alle relevanten Browser auf drei Gruppen reduzieren: Safari und Firefox haben jeweils eine eigene Render-Engine. Opera setzt schon seit einigen Jahren auf Chromium auf \autocite{opera-webkit} und auch für den Edge-Browser wurde 2018 angekündigt Chromium als Basis zu verwenden \autocite{edge-faq}. Der Internet Explorer wird immer weniger verwendet und von Microsoft nicht mehr für den normalen Endnutzer empfohlen \autocite{edge-faq}, deswegen wird der Internet Explorer hier auch nicht berücksichtigt. In den nachfolgenden Kapiteln wird der Browser Edge und Opera mit Chrome gleichgesetzt und nicht extra erwähnt, solange keine relevanten Unterschiede vorhanden sind. Die Browser Safari, Firefox und Chrome (inklusive der Chromium basierten Browser) haben einen Marktanteil von über 94\%.

\section{Szenarien}
Jedes Szenario beschreibt eine konkrete Interaktion mit dem Webportal ohne Sonderfälle abzubilden. Sie dienen dazu die Anforderungen besser zu verstehen. Im folgenden werden drei Szenarien beschrieben.

\subsection{Predigt im Auto anhören}
Akteur: Benutzer

Ablauf:
\begin{enumerate}
	\item Benutzer ist zu Hause und durchsucht Inhalte auf CROSSLOAD
	\item Benutzer favorisiert sich mehrere Inhalte
	\item Der Download der Inhalte startet
	\item Sobald der Download fertig ist, wird das dem Benutzer angezeigt
	\item Benutzer geht außer Haus in sein Auto
	\item Benutzer bekommt alle favorisierten Inhalte angezeigt
	\item Benutzer wählt einen favorisierten Inhalt aus und sieht die Übersichtsseite des Inhalt
	\item Benutzer hört sich die Predigt an und benötigt dafür kein Internet
\end{enumerate}

\subsection{Inhalt für die Reise vormerken}
Akteur: Benutzer

Ablauf:
\begin{enumerate}
	\item Benutzer ist am Flughafen und steht kurz vor einem Flug
	\item Benutzer favorisiert sich einen Inhalt auf CROSSLOAD
	\item CROSSLOAD fragt den Benutzer, ob er den Inhalt auch über mobiles Inernet herunterladen möchte
	\item Der Benutzer bestätigt diese Anfrage
	\item Der Download beginnt
	\item Sobald der Download fertig ist, wird das dem Benutzer angezeigt
	\item Benutzer ist im Flugzeug und hört sich die favorisierte Predigt an
\end{enumerate}

\subsection{Inhalt herunterladen sobald eine WLAN Verbindung besteht}
Akteur: Benutzer

Ablauf:
\begin{enumerate}
	\item Benutzer ist unterwegs und bekommt einen Inhalt auf CROSSLOAD empfohlen
	\item Benutzer favorisiert diesen Inahlt
	\item CROSSLOAD fragt den Benutzer, ob er den Inhalt auch über mobiles Inernet herunterladen möchte
	\item Der Benutzer verneint diese Anfrage
	\item Der Benutzer kommt nach Hause und ist mit dem eigenen WLAN verbunden
	\item Der Download der favorisierten Predigt beginnt
	\item Sobald der Download fertig ist, wird das dem Benutzer angezeigt
	\item Der Benutzer hört sich die favorisierte Predigt an. Obwohl er eine WLAN-Verbindung besitzt, werden die heruntergeladenen Inhalte zum Abspielen der Predigt genutzt
\end{enumerate}

\section{Anforderungen}
Aus den Diskussionen mit Mitarbeitern von CROSSLOAD haben sich die Anforderungen herausgestellt, die in diesem Kapitel aufgelistet sind. Für diese Thesis sind nur Audioinhalte auf CROSSLOAD relevant.

\begin{itemize}
	\item Der Benutzer kann sich einen Inhalt vormerken
	\item Der vorgemerkte Inhalt wird automatisch anhand der Verbindungsart heruntergeladen. Der genaue Ablauf ist in einem Aktivitätsdiagramm in \autoref{diagramme/anforderung-konnektivitaet} zu sehen.
	
	\begin{itemize}
		\item Wenn eine WLAN-Verbindung besteht wird der Download sofort gestartet
		\item Wenn eine mobile Datenverbindung besteht wird der Benutzer gefragt, ob er den Inhalt jetzt herunterladen möchte
		\item Wenn der Benutzer dies verneint wird auf eine WLAN-Verbindung gewartet und der Download gestartet, sobald diese besteht
	\end{itemize}
	
\bild{diagramme/anforderung-konnektivitaet}{15cm}{Aktivitätsdiagramm: Download des Inhalt abhängig von der Verbindungsart}

	\item Der Benutzer wird über den Fortschritt des Downloads informiert
	\item Das Portal erkennt wenn ein Benutzer keine Internetverbindung hat und leitet ihn auf eine spezielle Seite weiter
	\item Die zurzeit heruntergeladenen Inhalte können in einer Übersicht gesehen werden
 	\item Die zurzeit heruntergaladenen Inhalte können gelöscht werden
	\item Es soll möglich sein, für einen bestimmten Inhalt herauszufinden, ob dieser Offline verfügbar ist
	\item Die Inhalte der Detailseite eines heruntergeladenen Inhalts werden gespeichert
	\item Der heruntergeladene Inhalt kann angehört werden
	\begin{itemize}
		\item Wenn ein Inhalt angehört werden soll, der bereits heruntergeladen ist, sollen die heruntergeladenen Daten verwendet werden, um Traffic zu vermeiden
	\end{itemize}
	
\end{itemize}
